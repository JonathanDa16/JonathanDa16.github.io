"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7751],{7751:(_,h,s)=>{s.r(h),s.d(h,{LoginDesktopPageModule:()=>d});var g=s(6895),r=s(433),o=s(5035),a=s(1407),t=s(8256),f=s(655),k=s(4602);let m=(()=>{class e{constructor(n,i){this.navCtrl=n,this.api=i,this.isEmailEmpty=!1,this.isPasswordEmpty=!1,this.isEmailPatternValid=!0,this.emailValidationStatus=!1,this.buttonClickedStatus=!1,this.email="",this.password="",this.form=new r.cw({email:new r.NI("",r.kI.required),password:new r.NI("",r.kI.required)})}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){})}login(){return(0,f.mG)(this,void 0,void 0,function*(){const i=(yield this.api.login({email:this.email,password:this.password})).getData();this.goToUser(i)})}isFieldAlreadyClicked(n){var i,u;return(null===(i=this.form.get(n))||void 0===i?void 0:i.touched)||(null===(u=this.form.get(n))||void 0===u?void 0:u.dirty)}isFieldEmpty(n){var i;return null===(i=this.form.get(n))||void 0===i?void 0:i.hasError("required")}areFieldsValid(){return this.isEmailEmpty=this.isFieldEmpty("email"),this.isPasswordEmpty=this.isFieldEmpty("password"),this.isEmailPatternValid=new RegExp("(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\x01-\b\v\f\x0e-\x1f!#-[]-\x7f]|\\\\[\x01-\t\v\f\x0e-\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\b\v\f\x0e-\x1f!-ZS-\x7f]|\\\\[\x01-\t\v\f\x0e-\x7f])+)\\])").test(this.email),!this.isEmailEmpty&&!this.isPasswordEmpty&&this.isEmailPatternValid}clearFields(){(this.isEmailEmpty||!this.isEmailPatternValid)&&(this.email=""),this.isPasswordEmpty&&(this.password="")}goToRegister(){this.navCtrl.navigateForward("/register",{skipLocationChange:!0})}goToUser(n){switch(n){case"patient":this.navCtrl.navigateForward("/patient-home-desktop",{skipLocationChange:!0});break;case"doctor":this.navCtrl.navigateForward("/doctor-home-desktop",{skipLocationChange:!0});break;case"admin":this.navCtrl.navigateForward("/admin-home-desktop",{skipLocationChange:!0})}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.SH),t.Y36(k.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login-desktop-box"]],decls:16,vars:2,consts:[["type","email","placeholder","Correo electronico",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a",3,"ngModel","ngModelChange"],["href",""],[3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-card")(1,"ion-card-title"),t._uU(2,"Inicio de sesi\xf3n"),t.qZA(),t.TgZ(3,"div")(4,"ion-item")(5,"ion-input",0),t.NdJ("ngModelChange",function(v){return i.email=v}),t.qZA()(),t.TgZ(6,"ion-item")(7,"ion-input",1),t.NdJ("ngModelChange",function(v){return i.password=v}),t.qZA()(),t.TgZ(8,"a",2),t._uU(9,"\xbfOlvidaste tu contrase\xf1a?"),t.qZA(),t._UZ(10,"hr"),t.TgZ(11,"ion-button",3),t.NdJ("click",function(){return i.login()}),t._uU(12,"Iniciar sesi\xf3n"),t.qZA(),t._UZ(13,"hr"),t.TgZ(14,"a",3),t.NdJ("click",function(){return i.goToRegister()}),t._uU(15,"\xbfAun no tienes cuenta?"),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngModel",i.email),t.xp6(2),t.Q6J("ngModel",i.password))},dependencies:[r.JJ,r.On,o.YG,o.PM,o.Dq,o.pK,o.Ie,o.j9],styles:["*[_ngcontent-%COMP%]{font-family:Quicksand-Regular,sans-serif}ion-card-title[_ngcontent-%COMP%]{color:#46c3f3;text-align:center;font-size:2.5vw}ion-card[_ngcontent-%COMP%]{padding:3vw;border-radius:25px;width:37vw}ion-item[_ngcontent-%COMP%]{margin-top:1vw;margin-bottom:1vw}ion-button[_ngcontent-%COMP%]{font-family:Quicksand-Semibold,sans-serif;width:100%;--background: #46C3F3}a[_ngcontent-%COMP%]{color:#595959}"]}),e})();const c=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login-desktop"]],decls:3,vars:0,consts:[["padding","",1,"background"],[1,"container"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-content",0)(1,"div",1),t._UZ(2,"app-login-desktop-box"),t.qZA()())},dependencies:[o.W2,m],styles:["ion-content.background[_ngcontent-%COMP%]{--background: url(background_login.32b7f78e08e23cd6.jpg) 0 0/100% 100% no-repeat}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[a.Bz.forChild(c),a.Bz]}),e})(),d=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,r.u5,o.Pc,p,r.UX]}),e})()},4602:(_,h,s)=>{s.d(h,{B:()=>k});var g=s(655),r=s(529),o=s(2340),a=s(4456),t=s(8256),f=s(8264);let k=(()=>{class m{constructor(c,p){this.http=c,this.token=p}login(c){return(0,g.mG)(this,void 0,void 0,function*(){const p=(new r.WM).set("Content-Type","application/json"),d=o.N.apiUrlBase+"/account/login";try{const e=yield this.http.post(d,c,{headers:p}).toPromise(),l=new a.d(e);this.token.value=l.getData();const n=(new r.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${this.token.value}`),i=o.N.apiUrlBase+"/account/user";try{const u=yield this.http.post(i,c,{headers:n}).toPromise(),v=new a.d(u);return console.log(v.getData()),v}catch(u){return new a.d(u.error)}}catch(e){return new a.d(e.error)}})}getEmail(){return(0,g.mG)(this,void 0,void 0,function*(){const c=(new r.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${this.token.value}`),p=o.N.apiUrlBase+"/account/data";try{const d=yield this.http.post(p,{},{headers:c}).toPromise(),e=new a.d(d);return console.log(e.getData()),e}catch(d){return new a.d(d.error)}})}update(c){return(0,g.mG)(this,void 0,void 0,function*(){const p=(new r.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${this.token.value}`),d=o.N.apiUrlBase+"/account/update";try{const e=yield this.http.post(d,c,{headers:p}).toPromise(),l=new a.d(e);return console.log(l.getData()),l}catch(e){return new a.d(e.error)}})}getPreferences(){return(0,g.mG)(this,void 0,void 0,function*(){const c=(new r.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${this.token.value}`),p=o.N.apiUrlBase+"/account/preferences";try{const d=yield this.http.post(p,{},{headers:c}).toPromise();return new a.d(d)}catch(d){return new a.d(d.error)}})}}return m.\u0275fac=function(c){return new(c||m)(t.LFG(r.eN),t.LFG(f.B))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},8264:(_,h,s)=>{s.d(h,{B:()=>r});var g=s(8256);let r=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4456:(_,h,s)=>{s.d(h,{d:()=>g});class g{constructor(o){this._success=o.success,this.timestamp=o.timestamp,this._metadata=o.metadata,this._data=o.data,this._error=o.error}getStatus(){return this._success}getSuccess(){return this._success}getMetadata(){return this._metadata}getData(){return this._data}getError(){return this._error}}}}]);